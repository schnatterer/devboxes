- name: Install code
  become: yes
  snap:
    name: code
    classic: yes
    state: present
  when: ansible_system == "Linux"

- name: Remove deprecated vscode
  become: yes
  snap:
    name: vscode
    classic: yes
    state: absent
  when: ansible_system == "Linux"

- name: install vscode extensions
  command: "code --install-extension '{{ item }}'"
  with_items:
  - ms-kubernetes-tools.vscode-kubernetes-tools
  - ms-azuretools.vscode-docker
  - EditorConfig.EditorConfig
  - dbaeumer.vscode-eslint
  - esbenp.prettier-vscode
  - flowtype.flow-for-vscode
  - vscoss.vscode-ansible
  - k--kato.intellij-idea-keybindings
  - mauve.terraform
  - marcostazi.vs-code-vagrantfile
  - redhat.vscode-yaml
  - jebbs.plantuml
  - mrcrowl.hg
  - msjsdiag.debugger-for-chrome
  - ms-vsliveshare.vsliveshare
  register: vscode_result
  changed_when: "'already installed' not in vscode_result.stdout"

# todo install vscode on mac
